<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>통신배열(front-back)</title>
    <script src="./jquery.js"></script>
    <script>
      let array_data = ""; //backend에서 전달받은 값을 저장 전역변수
      function products(array) {
        //backend : data를 받고, 실행 작동
        array_data = array;
        //console.log(array);
      }
      $(function () {
        $.fn.abc = function () {
          let $array = array_data;
          //javascript에서 백엔드 데이터를 받은 전역변수값을 가져와서 출력시킴
          let $total = 0;
          $.each($array, function ($a, $b) {
            //each문으로 해당 배열값을 출력
            //console.log($b.money);
            /*응용문제 : 
           장바구니에 담겨 있는 상품의 총 합계 금액을
           콘솔로 출력합니다.
           */
            //$total = $total + Number($b.money);
            $total += Number($b.money);
          });
          console.log($total);
        };

        $("#btn").click(function () {
          $.fn.abc(); //이벤트 핸들링에서 확장 함수로 호출
        });
      });
    </script>
    <script src="http://lovertvtest.dothome.co.kr/jq/array.php"></script>
  </head>
  <body>
    <input type="button" value="총합계" id="btn" />
  </body>
</html>
